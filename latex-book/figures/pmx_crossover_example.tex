\documentclass[tikz,border=10pt]{standalone}
\usepackage{tikz}
\usetikzlibrary{positioning,shapes,arrows.meta,decorations.pathreplacing}

\begin{document}
\begin{tikzpicture}[
    node distance=0.5cm,
    gene/.style={draw, rectangle, minimum width=0.8cm, minimum height=0.8cm, font=\large\bfseries},
    parent/.style={gene, fill=blue!20},
    child/.style={gene, fill=green!20},
    selected/.style={gene, fill=red!30},
    mapped/.style={gene, fill=orange!30},
    arrow/.style={->, thick, red}
]

% Title
\node[font=\Large\bfseries] at (4, 8) {Partially Mapped Crossover (PMX) Example};

% Step 1: Original Parents
\node[font=\large\bfseries] at (-1, 6.5) {Step 1: Parents};
\node[font=\bfseries] at (-2, 5.8) {Parent 1:};
\foreach \i/\val in {0/1, 1/2, 2/3, 3/4, 4/5, 5/6, 6/7, 7/8, 8/9} {
    \node[parent] (p1\i) at (\i, 5.5) {\val};
}

\node[font=\bfseries] at (-2, 4.8) {Parent 2:};
\foreach \i/\val in {0/5, 1/4, 2/6, 3/9, 4/2, 5/3, 6/7, 7/1, 8/8} {
    \node[parent] (p2\i) at (\i, 4.5) {\val};
}

% Crossover points
\draw[red, thick, dashed] (2.5, 6) -- (2.5, 4);
\draw[red, thick, dashed] (5.5, 6) -- (5.5, 4);
\node[red, font=\small] at (2.3, 6.2) {Cut 1};
\node[red, font=\small] at (5.7, 6.2) {Cut 2};

% Step 2: Select segments and create mapping
\node[font=\large\bfseries] at (-1, 3.5) {Step 2: Select segments (positions 3-5)};

\node[font=\bfseries] at (-2, 2.8) {Parent 1:};
\foreach \i/\val in {0/1, 1/2} {
    \node[parent] (s1p1\i) at (\i, 2.5) {\val};
}
\foreach \i/\val in {2/3, 3/4, 4/5} {
    \node[selected] (s1p1\i) at (\i, 2.5) {\val};
}
\foreach \i/\val in {5/6, 6/7, 7/8, 8/9} {
    \node[parent] (s1p1\i) at (\i, 2.5) {\val};
}

\node[font=\bfseries] at (-2, 1.8) {Parent 2:};
\foreach \i/\val in {0/5, 1/4} {
    \node[parent] (s1p2\i) at (\i, 1.5) {\val};
}
\foreach \i/\val in {2/6, 3/9, 4/2} {
    \node[selected] (s1p2\i) at (\i, 1.5) {\val};
}
\foreach \i/\val in {5/3, 6/7, 7/1, 8/8} {
    \node[parent] (s1p2\i) at (\i, 1.5) {\val};
}

% Mapping relationships
\node[font=\bfseries] at (10, 2.8) {Mapping:};
\node[font=\large] at (10, 2.3) {3 ↔ 6};
\node[font=\large] at (10, 1.9) {4 ↔ 9};
\node[font=\large] at (10, 1.5) {5 ↔ 2};

% Step 3: Exchange segments
\node[font=\large\bfseries] at (-1, 0.5) {Step 3: Exchange segments};

\node[font=\bfseries] at (-2, -0.2) {Child 1:};
\foreach \i/\val in {0/1, 1/2} {
    \node[child] (c1\i) at (\i, -0.5) {\val};
}
\foreach \i/\val in {2/6, 3/9, 4/2} {
    \node[selected] (c1\i) at (\i, -0.5) {\val};
}
\foreach \i/\val in {5/6, 6/7, 7/8, 8/9} {
    \node[child] (c1\i) at (\i, -0.5) {\val};
}

% Step 4: Resolve conflicts using mapping
\node[font=\large\bfseries] at (-1, -1.5) {Step 4: Resolve conflicts using mapping};

\node[font=\bfseries] at (-2, -2.2) {Child 1:};
\foreach \i/\val in {0/1, 1/4} {
    \node[child] (f1\i) at (\i, -2.5) {\val};
}
\foreach \i/\val in {2/6, 3/9, 4/2} {
    \node[selected] (f1\i) at (\i, -2.5) {\val};
}
\foreach \i/\val in {5/3, 6/7, 7/8, 8/5} {
    \node[child] (f1\i) at (\i, -2.5) {\val};
}

% Mapping arrows for conflicts
\draw[arrow] (c15.south) to[bend left=20] node[midway, below, font=\small] {6→3} (f15.north);
\draw[arrow] (c18.south) to[bend left=20] node[midway, below, font=\small] {9→5} (f18.north);
\draw[arrow] (c11.south) to[bend left=20] node[midway, below, font=\small] {2→4} (f11.north);

% Final result
\node[font=\large\bfseries] at (-1, -3.5) {Final Result};
\node[font=\bfseries] at (-2, -4.2) {Child 1:};
\foreach \i/\val in {0/1, 1/4, 2/6, 3/9, 4/2, 5/3, 6/7, 7/8, 8/5} {
    \node[child] (final\i) at (\i, -4.5) {\val};
}

% Legend
\node[parent, font=\small] at (10, -1) {Parent};
\node[selected, font=\small] at (10, -1.5) {Selected};
\node[child, font=\small] at (10, -2) {Child};
\node[font=\small] at (10.8, -1) {Original elements};
\node[font=\small] at (10.8, -1.5) {Crossover segment};
\node[font=\small] at (10.8, -2) {Final result};

\end{tikzpicture}
\end{document}